import 'package:flutter/material.dart'; import 'package:local_auth/local_auth.dart'; class FingerprintAuthScreen extends StatefulWidget { final Function onAuthenticated; FingerprintAuthScreen({required this.onAuthenticated}); @override _FingerprintAuthScreenState createState() => _FingerprintAuthScreenState(); } class _FingerprintAuthScreenState extends State<FingerprintAuthScreen> { final LocalAuthentication auth = LocalAuthentication(); String message = 'Authenticate using your fingerprint'; Future<void> authenticate() async { try { bool authenticated = await auth.authenticate( localizedReason: 'Scan your fingerprint to proceed', options: const AuthenticationOptions( biometricOnly: true, stickyAuth: true, ), ); if (authenticated) widget.onAuthenticated(); else setState(() { message = 'Authentication failed'; }); } catch (e) { setState(() { message = 'Error: $e'; }); } } @override void initState() { super.initState(); authenticate(); } @override Widget build(BuildContext context) { return Scaffold( appBar: AppBar(title: Text('Fingerprint Authentication')), body: Center(child: Text(message)), ); } }