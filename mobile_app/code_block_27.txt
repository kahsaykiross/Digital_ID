import 'dart:convert'; import 'package:http/http.dart' as http; import 'package:http_parser/http_parser.dart'; import 'dart:io'; const String API_URL = 'http://localhost:5000/api'; class ApiService { static Future<Map<String, dynamic>> registerUser(Map<String, String> data) async { final res = await http.post(Uri.parse('$API_URL/enrollment/register'), headers: {'Content-Type': 'application/json'}, body: jsonEncode(data)); return jsonDecode(res.body); } static Future<Map<String, dynamic>> loginUser(Map<String, String> data) async { final res = await http.post(Uri.parse('$API_URL/auth/login'), headers: {'Content-Type': 'application/json'}, body: jsonEncode(data)); return jsonDecode(res.body); } static Future<Map<String, dynamic>> uploadDocument(File file, String type, String token, String userId) async { var request = http.MultipartRequest('POST', Uri.parse('$API_URL/documents/upload')); request.files.add(await http.MultipartFile.fromPath('file', file.path, contentType: MediaType('application', 'octet-stream'))); request.fields['type'] = type; request.fields['userId'] = userId; request.headers['Authorization'] = 'Bearer $token'; var streamedResponse = await request.send(); var response = await http.Response.fromStream(streamedResponse); return jsonDecode(response.body); } }