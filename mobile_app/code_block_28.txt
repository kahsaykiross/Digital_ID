import 'package:flutter/material.dart'; import 'package:flutter_secure_storage/flutter_secure_storage.dart'; class AuthProvider extends ChangeNotifier { final storage = FlutterSecureStorage(); String? _token; String? _userId; String? get token => _token; String? get userId => _userId; Future<void> saveToken(String token, String userId) async { _token = token; _userId = userId; await storage.write(key: 'token', value: token); await storage.write(key: 'userId', value: userId); notifyListeners(); } Future<void> loadToken() async { _token = await storage.read(key: 'token'); _userId = await storage.read(key: 'userId'); notifyListeners(); } Future<void> logout() async { _token = null; _userId = null; await storage.deleteAll(); notifyListeners(); } }