import 'package:flutter/material.dart'; import 'package:image_picker/image_picker.dart'; import '../services/api_service.dart'; import 'dart:io'; import 'package:provider/provider.dart'; import '../providers/auth_provider.dart'; class UploadScreen extends StatefulWidget { @override _UploadScreenState createState() => _UploadScreenState(); } class _UploadScreenState extends State<UploadScreen> { File? _file; String type = ''; String message = ''; final picker = ImagePicker(); Future<void> pickFile() async { final pickedFile = await picker.pickImage(source: ImageSource.gallery); if (pickedFile != null) setState(() => _file = File(pickedFile.path)); } @override Widget build(BuildContext context) { final authProvider = Provider.of<AuthProvider>(context); return Scaffold( appBar: AppBar(title: Text('Upload Document / Biometric')), body: Padding( padding: EdgeInsets.all(16), child: Column( children: [ ElevatedButton(onPressed: pickFile, child: Text('Select File')), TextField( decoration: InputDecoration(labelText: 'Document Type'), onChanged: (val) => type = val, ), SizedBox(height: 20), ElevatedButton( onPressed: _file != null ? () async { var res = await ApiService.uploadDocument(_file!, type, authProvider.token!, authProvider.userId!); setState(() { message = res['message']; }); } : null, child: Text('Upload'), ), SizedBox(height: 10), Text(message) ], ), ), ); } }