import 'package:flutter/material.dart'; import '../services/api_service.dart'; import 'login_screen.dart'; class RegistrationScreen extends StatefulWidget { @override _RegistrationScreenState createState() => _RegistrationScreenState(); } class _RegistrationScreenState extends State<RegistrationScreen> { final _formKey = GlobalKey<FormState>(); String fullName = '', dob = '', nationalId = '', email = '', password = ''; String message = ''; @override Widget build(BuildContext context) { return Scaffold( appBar: AppBar(title: Text('Register')), body: Padding( padding: EdgeInsets.all(16), child: Form( key: _formKey, child: Column( children: [ TextFormField( decoration: InputDecoration(labelText: 'Full Name'), onChanged: (val) => fullName = val, validator: (val) => val!.isEmpty ? 'Required' : null, ), TextFormField( decoration: InputDecoration(labelText: 'Date of Birth (YYYY-MM-DD)'), onChanged: (val) => dob = val, validator: (val) => val!.isEmpty ? 'Required' : null, ), TextFormField( decoration: InputDecoration(labelText: 'National ID'), onChanged: (val) => nationalId = val, validator: (val) => val!.isEmpty ? 'Required' : null, ), TextFormField( decoration: InputDecoration(labelText: 'Email'), onChanged: (val) => email = val, ), TextFormField( decoration: InputDecoration(labelText: 'Password'), onChanged: (val) => password = val, obscureText: true, validator: (val) => val!.isEmpty ? 'Required' : null, ), SizedBox(height: 20), ElevatedButton( onPressed: () async { if (_formKey.currentState!.validate()) { var res = await ApiService.registerUser({ 'fullName': fullName, 'dob': dob, 'nationalId': nationalId, 'email': email, 'password': password, }); setState(() { message = res['message']; }); if (res['user'] != null) Navigator.push(context, MaterialPageRoute(builder: (_) => LoginScreen())); } }, child: Text('Register'), ), SizedBox(height: 10), Text(message) ], ), ), ), ); } }